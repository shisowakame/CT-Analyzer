body { font-family: sans-serif; margin: 20px; background: #f7f9fb; }
.main-container { display: flex; gap: 20px; align-items: flex-start; width: 100vw; box-sizing: border-box; }
.left-panel { flex: 0 0 66.66vw; width: 66.66vw; }
.right-panel { flex: 0 0 33.33vw; min-width: 300px; margin-top: 0px; width: 33.33vw; }
#toolbar {
    width: var(--dicom-grid-width, 66.66vw);
    margin-left: 25px;
    margin-bottom: 16px;
    padding: 8px 0;
    background: #f0f0f0;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
}
.toolbar-label-text { display: flex; align-items: center; gap: 6px; font-weight: normal; }
#grid {
    width: var(--dicom-grid-width, 66.66vw);
    margin-left: 25px;
    display: grid;
    grid-template-columns: repeat(var(--col-num, 4), 1fr);
    gap: 20px;
}
.series-block { width: 100%; box-shadow: 0 2px 8px rgba(0,0,0,0.07); border-radius: 8px; background: #fff; padding: 8px 0 12px 0; }
.dicom-square { aspect-ratio: 1/1; width: 100%; position: relative; border-radius: 8px; overflow: hidden; box-shadow: 0 1px 4px rgba(0,0,0,0.04); }
.dicom-img, .roi-canvas {
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    max-width: none;
    max-height: none;
    margin: 0;
    padding: 0;
    border: none;
    display: block;
}
.series-block { display: flex; flex-direction: column; align-items: center; position: relative; }
.dicom-img { display: block; position: relative; z-index: 1; }
.roi-canvas { position: absolute; left: 0; top: 0; z-index: 2; pointer-events: auto; }
.slider { width: 20vw; accent-color: #1976d2; }
#global-slider-block { margin-top: 20px; text-align: center; }
#global-slider { width: 40vw; accent-color: #1976d2; }
.info-panel { margin-top: 5px; font-size: 12px; color: #222; background: #f4f4f4; border-radius: 4px; padding: 4px 8px; min-width: 200px; box-shadow: 0 1px 4px rgba(0,0,0,0.04); }
.series-block > div[style*='font-weight: bold'] { display: flex; align-items: center; gap: 6px; }
/* 履歴パネル用スタイル */
.history-panel { background: #f9f9f9; border: 1px solid #ddd; border-radius: 10px; padding: 16px; box-shadow: 0 2px 12px rgba(0,0,0,0.07); }
.history-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
.history-header h3 { margin: 0; font-size: 15px; color: #333; display: flex; align-items: center; gap: 6px; }
.history-controls { display: flex; gap: 8px; }
.history-table-block { max-height: 70vh; overflow-y: auto; }
.history-table { font-size: 11px; border-collapse: collapse; width: 100%; background: #fff; border-radius: 6px; overflow: hidden; }
.history-table th, .history-table td { border-bottom: 1px solid #eee; padding: 2px 4px; text-align: right; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.history-table th { border-bottom: 1px solid #bbb; background: #f5f5f5; }
.delete-btn { background: #f44336; color: white; border: none; border-radius: 2px; padding: 1px 4px; font-size: 10px; cursor: pointer; transition: background 0.2s; }
.delete-btn:hover { background: #b71c1c; }
.save-btn { background: #2196f3; color: white; border: none; border-radius: 4px; padding: 4px 10px; font-size: 12px; cursor: pointer; box-shadow: 0 1px 4px rgba(33,150,243,0.08); transition: background 0.2s; }
.save-btn:hover { background: #1769aa; }
.reset-btn { background: #f44336; color: white; border: none; border-radius: 4px; padding: 4px 10px; font-size: 12px; cursor: pointer; box-shadow: 0 1px 4px rgba(244,67,54,0.08); transition: background 0.2s; }
.reset-btn:hover { background: #b71c1c; }
.export-excel-btn { background: #1a7340; color: white; border: none; border-radius: 4px; padding: 4px 10px; font-size: 12px; cursor: pointer; box-shadow: 0 1px 4px rgba(26,115,64,0.08); transition: background 0.2s; }
.export-excel-btn:hover { background: #14532d; }
.info-text { font-size: 11px; color: #888; margin-top: 8px; }
h2 { margin-top: 0; font-size: clamp(1rem, 1.7vw, 1.2rem); display: flex; align-items: center; gap: 8px; }
#toolbar span:first-child { margin-left: 10px; }
.right-panel { flex: 0 0 30vw; min-width: 300px; margin-top: 0px; width: 30vw; }
#history-avg-row-block { max-width: 30vw; width: 100%; overflow-x: auto; }
#history-avg-row-block > table { max-width: 30vw; width: 100%; box-sizing: border-box; }
/* ボタン共通 */
button { transition: box-shadow 0.2s, background 0.2s; }
button:active { box-shadow: 0 2px 8px rgba(33,150,243,0.12) inset; }
/* ROIサイズボックスのスピンボタン非表示 */
#roi-width, #roi-height {
    /* スピンボタンのみ非表示、枠線や背景色は元のまま */
}
#roi-width::-webkit-outer-spin-button, #roi-width::-webkit-inner-spin-button,
#roi-height::-webkit-outer-spin-button, #roi-height::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}
#roi-width::-moz-inner-spin-button, #roi-height::-moz-inner-spin-button {
    -moz-appearance: none;
}
/* ROIサイズボックスとROI座標入力ボックスの中央揃え */
#roi-width, #roi-height, input[id^="roi-x-"], input[id^="roi-y-"] {
    text-align: center;
}
.preset {
    background: #333;
    color: white;
    border: none;
    border-radius: 4px;
    padding: 4px 8px;
    font-size: 12px;
    cursor: pointer;
    margin-left: 1px;
}
.preset:hover {
    background: #555;
}
